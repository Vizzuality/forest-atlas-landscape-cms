{{#*inline "item"}}
  <ul {{#if firstCall}}class="js-tree-root"{{/if}}>
    {{#each pages}}
      <li
        class="js-draggable"
        {{#each this}}
          {{#if_eq @key 'id'}}
            id="page-{{this}}"
          {{else}}
            {{#if_eq @key 'children'}}
            {{else}}
              {{#if_eq this null}}
              {{else}}
                data-{{@key}}="{{this}}"
              {{/if_eq}}
            {{/if_eq}}
          {{/if_eq}}
        {{/each}}
      >
        <div class="page {{#unless enabled}} -disabled {{/unless}} js-handle">
          {{> pageTemplate}}
        </div>
        {{#if children}}
          {{> item pages=children firstCall=false}}
        {{/if}}
      </li>
    {{/each}}
    {{#unless firstCall}}
      <li class="js-not-nestable">
        {{> additionalPageTemplate}}
      </li>
    {{/unless}}
  </ul>
{{/inline}}

<div class="c-tree-structure">
  {{> item pages=pages firstCall=true}}
</div>
