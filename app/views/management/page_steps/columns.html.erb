<%= render partial: 'shared/navigation_header', \
  locals: {form_steps: form_steps, id: @page.id, current_step: step, step_names: @steps_names, \
  invalid_steps: @invalid_steps, invalid_state: @page.errors.any?} %>
<%= render partial: 'shared/errors', locals: { resource: @page } %>

<h1>SELECT COLUMNS</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla laoreet velit ante, ornare pretium sapien venenatis vel. Mauris nec nisi sit amet ex commodo sodales eget placerat metus.</p>
<%= form_for @page, url: wizard_path, method: :put do |f| %>
    <% @fields.each do |field|%>
        <fieldset>
          <%= field[:name] %>
          <%= check_box_tag "site_page[dataset_setting][visible_fields][]", field[:name],
              (JSON.parse(@dataset_setting.columns_visible)).include?(field[:name]) %>
        </fieldset>
    <% end %>
    <%= render partial: 'footer', locals: {f: f} %>
<% end %>
<%= render partial: 'shared/errors', locals: { resource: @page } %>

